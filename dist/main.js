(()=>{"use strict";const e=class{constructor({main:e,wrap:t,prev:s,next:n,slidesToShow:i=3,position:o=0,infinity:l=!1,responsive:r=[]}){this.main=document.querySelector(e),this.wrap=document.querySelector(t),this.slides=this.wrap.children,this.prev=document.querySelector(s),this.next=document.querySelector(n),this.slidesToShow=i,this.slideWidth=Math.floor(100/this.slidesToShow),this.maxPosition=this.slides.length-this.slidesToShow,this.position=o,this.infinity=l,this.responsive=r}init(){this.addStyleClass(),this.addStyle(),this.controlSlider(),this.responsive&&this.responseInit()}addStyleClass(){this.main.classList.add("glo-carousel"),this.wrap.classList.add("glo-carousel_wrap");for(const e of this.slides)e.classList.add("glo-carousel_item")}addStyle(){let e=document.getElementById("carousel-style");e||(e=document.createElement("style"),e.id="carousel-style"),e.textContent=".glo-carousel {\n        overflow: hidden;\n        position: relative;\n      }\n      .glo-carousel_wrap {\n        display: flex;\n        transition: transform 0.5s;\n        will-change: transform;\n      }\n      .glo-carousel_item {\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n        max-width: 100%;\n      }",document.head.append(e);for(const e of this.slides)e.style.flex=`0 0 ${this.slideWidth}%`}prevSlide(){(this.infinity||this.position>0)&&(--this.position,this.position<0&&(this.position=this.maxPosition),this.wrap.style.transform=`translateX(-${this.position*this.slideWidth}%)`)}nextSlide(){(this.infinity||this.position<this.maxPosition)&&(++this.position,this.position>this.maxPosition&&(this.position=0),this.wrap.style.transform=`translateX(-${this.position*this.slideWidth}%)`)}controlSlider(){this.prev.addEventListener("click",this.prevSlide.bind(this)),this.next.addEventListener("click",this.nextSlide.bind(this))}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),s=Math.max(...t),n=e=>{this.slideWidth=Math.floor(100/e),this.addStyle(),this.maxPosition=this.slides.length-e},i=()=>{const i=document.documentElement.clientWidth;if(i<s)for(let e=0;e<t.length;e++)i<t[e]&&(this.slidesToShow=this.responsive[e].slidesToShow,n(this.slidesToShow));else this.slidesToShow=e,n(this.slidesToShow)};i(),window.addEventListener("resize",i)}};document.body.addEventListener("click",(e=>{if(!e.target.matches(".fancyboxModal"))return;e.preventDefault();const t=e.target,s=document.querySelector(t.getAttribute("href")),n=s.closest(".modal--opened"),i=document.querySelector(".overlay");n.style.display="block",i.style.display="block",s.style.display="block";const o=e=>{e.target.matches(".modal__close, .overlay")&&(n.style.display="none",i.style.display="none",s.style.display="none",document.body.removeEventListener("click",o))};document.body.addEventListener("click",o)})),(()=>{const e=document.querySelector(".smooth-scroll"),t=document.getElementById("services");window.addEventListener("scroll",(()=>{const s=t.getBoundingClientRect().top;e.style.display=s<=0?"block":"none"})),e.addEventListener("click",(()=>{window.scrollTo({left:0,top:0,behavior:"smooth"})}))})(),new e({main:".benefits-inner",wrap:".benefits-wrap",prev:".benefits__arrow--left",next:".benefits__arrow--right",slidesToShow:3,infinity:!0,responsive:[{breakpoint:576,slidesToShow:1}]}).init(),new e({main:".services-wrap",wrap:".services-wrap .row",prev:".services__arrow--left",next:".services__arrow--right",slidesToShow:2,infinity:!0,responsive:[{breakpoint:576,slidesToShow:1}]}).init(),(e=>{let t=document.querySelectorAll(".countdown");const s=()=>{const s=(()=>{const t=(new Date(e).getTime()-(new Date).getTime())/1e3,s=Math.floor(t%60),n=Math.floor(t/60%60),i=Math.floor(t/60/60%24);return{timeRemaining:t,days:Math.floor(t/60/60/24),hours:i,minutes:n,seconds:s}})();s.timeRemaining>0&&t.forEach((e=>{let t=e.querySelector(".count_1 span"),n=e.querySelector(".count_2 span"),i=e.querySelector(".count_3 span"),o=e.querySelector(".count_4 span");t.textContent=s.days<10?`0${s.days}`:s.days,n.textContent=s.hours<10?`0${s.hours}`:s.hours,i.textContent=s.minutes<10?`0${s.minutes}`:s.minutes,o.textContent=s.seconds<10?`0${s.seconds}`:s.seconds}))};s(),setInterval(s,1e3)})("01 January 2023"),document.getElementById("documents").addEventListener("click",(e=>{if(!e.target.closest(".sertificate-document"))return;e.preventDefault();const t=e.target.closest(".sertificate-document").getAttribute("href"),s=document.querySelector(".overlay"),n=document.getElementById("docsGallery"),i=n.querySelector(".modal-content"),o=n.closest(".modal--opened");i.innerHTML=`<img src="${t}" class="img-responsive" alt="">`,o.style.display="block",s.style.display="block",n.style.display="block";const l=e=>{e.target.matches(".modal__close, .overlay")&&(o.style.display="none",s.style.display="none",n.style.display="none",document.body.removeEventListener("click",l))};document.body.addEventListener("click",l)})),document.querySelector("input[name='user_message']").addEventListener("input",(e=>{let t=e.target;t.value=t.value.replace(/[^а-я\d\s\,\.\!\-\:\;\"\?]/gi,""),t.value.length<2?t.setCustomValidity("Введите минимум 2 буквы в поле"):t.setCustomValidity("")})),document.querySelectorAll("input[name='user_name']").forEach((e=>{e.addEventListener("input",(e=>{let t=e.target;t.value=t.value.replace(/[^а-я\s]/gi,""),t.value.length<2?t.setCustomValidity("Введите минимум 2 буквы"):t.setCustomValidity("")}))})),document.querySelectorAll('input[name="user_phone"]').forEach((e=>{e.addEventListener("input",(e=>{let t=e.target;t.value=t.value.replace(/[^\d\(\)\+\-]/gi,""),t.value.length<5?t.setCustomValidity("Введите не менее 5 цифр номера"):t.setCustomValidity("")}))})),(()=>{if(!document.getElementById("calc"))return;let e=document.getElementById("calc"),t=document.getElementById("calc-type"),s=document.getElementById("calc-type-material"),n=document.getElementById("calc-input"),i=document.getElementById("calc-total");e.addEventListener("change",(e=>{e.target.matches("select, input")&&(i.value="",(()=>{let e=t.options[t.selectedIndex].value,o=s.options[s.selectedIndex].value,l=+n.value;if(e&&o&&l){let t=l*e*o;i.value=t}else i.value=""})())})),e.addEventListener("input",(e=>{e.target.matches('input[type="number"]')&&(e.target.value=e.target.value.replace(/\D/g,""))}))})(),(()=>{const e=document.createElement("div");document.body.addEventListener("submit",(t=>{if(!t.target.closest("form"))return;t.preventDefault();const s=t.target;for(const e of s.elements)if("button"!==e.tagName.toLowerCase()&&"button"!==e.type&&"hidden"!==e.type&&!e.classList.contains("success"))return;s.append(e),e.innerHTML='<div class="sk-double-bounce">\n        <div class="sk-child sk-double-bounce-1"></div>\n        <div class="sk-child sk-double-bounce-2"></div>\n      </div>';const n=new FormData(s),i={};n.forEach(((e,t)=>{i[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(i).then((t=>{if(200!==t.status)throw new Error("response status is not 200");e.style.color="#00902a",e.innerHTML="Спасибо! Мы скоро с вами свяжемся!";for(const e of s.elements)"button"!==e.tagName.toLowerCase()&&"button"!==e.type&&(e.value="",e.classList.remove("success"))})).catch((t=>{e.style.color="#f00",e.innerHTML="Что-то пошло не так...",console.error(t)})).finally((()=>{setTimeout((()=>e.remove()),5e3)}))}))})()})();